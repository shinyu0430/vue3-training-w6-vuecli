(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02d346ed"],{"0b42":function(t,e,c){var a=c("da84"),n=c("e8b5"),r=c("68ee"),o=c("861d"),s=c("b622"),l=s("species"),u=a.Array;t.exports=function(t){var e;return n(t)&&(e=t.constructor,r(e)&&(e===u||n(e.prototype))?e=void 0:o(e)&&(e=e[l],null===e&&(e=void 0))),void 0===e?u:e}},"1dde":function(t,e,c){var a=c("d039"),n=c("b622"),r=c("2d00"),o=n("species");t.exports=function(t){return r>=51||!a((function(){var e=[],c=e.constructor={};return c[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,c){var a=c("0b42");t.exports=function(t,e){return new(a(t))(0===e?0:e)}},8418:function(t,e,c){"use strict";var a=c("a04b"),n=c("9bf2"),r=c("5c6c");t.exports=function(t,e,c){var o=a(e);o in t?n.f(t,o,r(0,c)):t[o]=c}},"99af":function(t,e,c){"use strict";var a=c("23e7"),n=c("da84"),r=c("d039"),o=c("e8b5"),s=c("861d"),l=c("7b0b"),u=c("07fa"),i=c("8418"),d=c("65f0"),b=c("1dde"),f=c("b622"),m=c("2d00"),p=f("isConcatSpreadable"),O=9007199254740991,j="Maximum allowed index exceeded",g=n.TypeError,h=m>=51||!r((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),v=b("concat"),y=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)},x=!h||!v;a({target:"Array",proto:!0,forced:x},{concat:function(t){var e,c,a,n,r,o=l(this),s=d(o,0),b=0;for(e=-1,a=arguments.length;e<a;e++)if(r=-1===e?o:arguments[e],y(r)){if(n=u(r),b+n>O)throw g(j);for(c=0;c<n;c++,b++)c in r&&i(s,b,r[c])}else{if(b>=O)throw g(j);i(s,b++,r)}return s.length=b,s}})},b0c0:function(t,e,c){var a=c("83ab"),n=c("5e77").EXISTS,r=c("e330"),o=c("9bf2").f,s=Function.prototype,l=r(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,i=r(u.exec),d="name";a&&!n&&o(s,d,{configurable:!0,get:function(){try{return i(u,l(this))[1]}catch(t){return""}}})},b789:function(t,e,c){"use strict";c.r(e);c("b0c0");var a=c("7a23"),n={class:"container"},r={class:"row justify-content-center"},o={class:"col-md-6"},s={class:"d-flex justify-content-between"},l=Object(a["g"])("h2",null,"我的購物車",-1),u={class:"input-group w-50 ms-auto"},i=["disabled"],d={class:"table"},b=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",null,"#"),Object(a["g"])("th",null,"品名"),Object(a["g"])("th",null,"數量"),Object(a["g"])("th",null,"單價"),Object(a["g"])("th",null,"合計")])],-1),f=["onClick"],m=Object(a["g"])("i",{class:"fas fa-spinner fa-pulse"},null,-1),p=Object(a["h"])(" 移除購物車 "),O=[m,p],j={key:0,class:"text-success"},g={class:"input-group input-group-sm w-50"},h=["onUpdate:modelValue","onChange"],v={key:1,colspan:"5",class:"text-center"},y=Object(a["g"])("td",{colspan:"4",class:"text-end"},"總計",-1),x={class:"text-end"},w={key:0},C=Object(a["g"])("td",{colspan:"4",class:"text-end text-success"},"折扣價",-1),V={class:"text-end text-success"},k={class:"row justify-content-center"},q={class:"col-md-6"},F=Object(a["g"])("h2",{class:"text-center"},"我的資料",-1),$={class:"mb-3"},U=Object(a["g"])("label",{for:"email",class:"form-label"},"Email",-1),S={class:"mb-3"},A=Object(a["g"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),J={class:"mb-3"},E=Object(a["g"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),_={class:"mb-3"},I=Object(a["g"])("label",{for:"address",class:"form-label"},"收件人地址",-1),M={class:"mb-3"},B=Object(a["g"])("label",{for:"message",class:"form-label"},"留言",-1),Q={class:"text-end"},T=["disabled"];function N(t,e,c,m,p,N){var X=Object(a["C"])("Field"),z=Object(a["C"])("ErrorMessage"),D=Object(a["C"])("Form");return Object(a["w"])(),Object(a["f"])("div",n,[Object(a["g"])("div",r,[Object(a["g"])("div",o,[Object(a["g"])("div",s,[l,Object(a["g"])("div",u,[Object(a["O"])(Object(a["g"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return p.coupon=t}),type:"text",class:"form-control"},null,512),[[a["J"],p.coupon]]),Object(a["g"])("button",{onClick:e[1]||(e[1]=function(){return N.addCoupon&&N.addCoupon.apply(N,arguments)}),class:"btn btn-secondary input-group-text",disabled:!p.coupon}," 套用優惠碼 ",8,i)])]),Object(a["g"])("table",d,[b,Object(a["g"])("tbody",null,[p.cart.carts.length?(Object(a["w"])(!0),Object(a["f"])(a["a"],{key:0},Object(a["B"])(p.cart.carts,(function(t){return Object(a["w"])(),Object(a["f"])("tr",{key:t.id},[Object(a["g"])("td",null,[Object(a["g"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return N.delCartItem(t.id)}},O,8,f)]),Object(a["g"])("td",null,[Object(a["h"])(Object(a["F"])(t.product.title)+" ",1),t.coupon?(Object(a["w"])(),Object(a["f"])("div",j," 已套用優惠券："+Object(a["F"])(t.coupon.code),1)):Object(a["e"])("",!0)]),Object(a["g"])("td",null,[Object(a["g"])("div",g,[Object(a["O"])(Object(a["g"])("input",{type:"number",class:"form-control","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return N.putCartQty(t)}},null,40,h),[[a["J"],t.qty]])])]),Object(a["g"])("td",null," $ "+Object(a["F"])(t.product.price),1),Object(a["g"])("td",null," $ "+Object(a["F"])(t.total),1)])})),128)):(Object(a["w"])(),Object(a["f"])("td",v,"購物車目前沒有商品"))]),Object(a["g"])("tfoot",null,[Object(a["g"])("tr",null,[y,Object(a["g"])("td",x,"$ "+Object(a["F"])(p.cart.total),1)]),p.cart.final_total!==p.cart.total?(Object(a["w"])(),Object(a["f"])("tr",w,[C,Object(a["g"])("td",V,"$ "+Object(a["F"])(Math.round(p.cart.final_total)),1)])):Object(a["e"])("",!0)])])])]),Object(a["g"])("div",k,[Object(a["g"])("div",q,[F,Object(a["i"])(D,{ref:"form",onSubmit:N.createOrder},{default:Object(a["N"])((function(t){var c=t.errors;return[Object(a["g"])("div",$,[U,Object(a["i"])(X,{id:"email",name:"email",type:"email",class:Object(a["q"])(["form-control",{"is-invalid":c["email"]}]),rules:"email|required",modelValue:p.form.user.email,"onUpdate:modelValue":e[2]||(e[2]=function(t){return p.form.user.email=t})},null,8,["class","modelValue"]),Object(a["i"])(z,{name:"email",class:"invalid-feedback"})]),Object(a["g"])("div",S,[A,Object(a["i"])(X,{id:"name",name:"姓名",type:"text",class:Object(a["q"])(["form-control",{"is-invalid":c["姓名"]}]),rules:"required",modelValue:p.form.user.name,"onUpdate:modelValue":e[3]||(e[3]=function(t){return p.form.user.name=t})},null,8,["class","modelValue"]),Object(a["i"])(z,{name:"姓名",class:"invalid-feedback"})]),Object(a["g"])("div",J,[E,Object(a["i"])(X,{id:"tel",name:"電話",type:"text",class:Object(a["q"])(["form-control",{"is-invalid":c["電話"]}]),rules:"required",modelValue:p.form.user.tel,"onUpdate:modelValue":e[4]||(e[4]=function(t){return p.form.user.tel=t})},null,8,["class","modelValue"]),Object(a["i"])(z,{name:"電話",class:"invalid-feedback"})]),Object(a["g"])("div",_,[I,Object(a["i"])(X,{id:"address",name:"地址",type:"text",class:Object(a["q"])(["form-control",{"is-invalid":c["地址"]}]),rules:"required",modelValue:p.form.user.address,"onUpdate:modelValue":e[5]||(e[5]=function(t){return p.form.user.address=t})},null,8,["class","modelValue"]),Object(a["i"])(z,{name:"地址",class:"invalid-feedback"})]),Object(a["g"])("div",M,[B,Object(a["O"])(Object(a["g"])("textarea",{name:"留言",id:"message",class:"form-control",cols:"30",rows:"6","onUpdate:modelValue":e[6]||(e[6]=function(t){return p.form.message=t})},null,512),[[a["J"],p.form.message]])]),Object(a["g"])("div",Q,[Object(a["g"])("button",{type:"submit",class:"btn btn-danger",disabled:!p.cart.carts.length}," 送出訂單 ",8,T)])]})),_:1},8,["onSubmit"])])])])}c("99af");var X={data:function(){return{cart:{carts:[]},form:{user:{name:"",email:"",tel:"",address:""},message:""},coupon:""}},created:function(){this.getCart()},methods:{getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("record-product","/cart");this.$http.get(e).then((function(e){e.data.success?t.cart=e.data.data:alert("取得商品失敗")}))},delCartItem:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("record-product","/cart/").concat(t);this.$http.delete(c).then((function(t){alert(t.data.message),e.getCart()})).catch((function(t){alert(t.response.data.message)}))},putCartQty:function(t){var e=this;if(t.qty<1)return alert("商品數量不能小於 1"),void(t.qty=1);var c={data:{product_id:t.id,qty:t.qty}},a="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("record-product","/cart/").concat(t.id);this.$http.put(a,c).then((function(t){alert(t.data.message),e.getCart()})).catch((function(t){alert(t.response.data.message)}))},addCoupon:function(){var t=this,e="https://vue3-course-api.hexschool.io/v2/api/record-product/coupon",c={data:{code:this.coupon}};this.$http.post(e,c).then((function(e){alert(e.data.message),t.getCart()})).catch((function(t){alert(t.response.data.message)}))},createOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("record-product","/order"),c={data:this.form};this.$http.post(e,c).then((function(e){alert(e.data.message),t.$refs.form.resetForm(),t.form.message="",t.getCart()})).catch((function(t){alert(t.response.data.message)}))}}},z=c("6b0d"),D=c.n(z);const G=D()(X,[["render",N]]);e["default"]=G},e8b5:function(t,e,c){var a=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==a(t)}}}]);
//# sourceMappingURL=chunk-02d346ed.6ff00369.js.map